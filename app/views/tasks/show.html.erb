<h1><%=@task.course%>:&nbsp;<%=@task.title%></h1>
<br />
<% if (notice) %>
  <p id="notice"><%=notice%></p>
<% end %>
<ul>
  <li>Title: <%=@task.title %></li>
  <li>Course: <%=@task.course %></li>
  <li>Type: <%=@task.kind %></li>
  <li>Relase Date: <%=@task.release.strftime("%B %d, %Y") %></li>
  <li>Due Date: <%=@task.due.strftime("%B %d, %Y") %></li>
  <li>Status: <%=@task.status %></li>
</ul>
<br />
<ul id="task-edit-buttons">
<li><%= button_to 'Edit Task', edit_task_path(@task), :method => :get, class: 'task-button' %></li>
<li><%= button_to 'Delete', task_path(@task), :method => :delete, class: 'task-button' %></li>
</ul>
<hr />
<h2>Statistics</h2>
<ul>
  <li>Elapsed Time: #ElapsedTime#</li>
  <% if (Time.now.utc < @task.due.utc) %>
    <li>Remaining Time: #RemainingTime#</li>
  <% else %>
    <li class="overdue">Remaining Time: #RemainingTime#</li>
  <% end %>
</ul>
<hr />
<h2>Subtasks:</h2>
<br />
<table>
  <tr>
    <th class="center-text">Completed</th>
    <th>Description</th>
    <th class="center-text">Edit</th>
    <th class="center-text">Delete</th>
  </tr>
<% @task.subtasks.each do |subtask| %>
  <tr id="subtask_<%= subtask.id %>">
  <%= form_for([subtask.task, subtask]) do |f| %>
      <td><div class="center-text"><%= f.check_box :is_done %></div></td>
      <td><%= f.text_field :description %></td>
      <td><div class="center-text"><%= f.submit "Update" %></div></td>
  <% end %>
    <td><div class="center-text"><%= button_to 'Delete', [subtask.task, subtask], method: :delete, class: 'subtask-button' %></div></td>
  </tr>
<% end %>
<%= form_for([@task, @subtask]) do |f| %>
  <tr id="subtask_new">
    <td class="center-text"><%= f.check_box :is_done %></td>
    <td><%= f.text_field :description, placeholder: 'Enter new subtask here' %></td>
    <td><div class="center-text"><%= f.submit "Create" %></div></td>
    <td class="center-text"></td>
  </tr>
<% end %>
</table>
<br />
<%= link_to 'Back to task list', tasks_path %><br>
